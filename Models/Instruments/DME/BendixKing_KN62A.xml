<?xml version="1.0" ?>

<!--
Bendix King KN62A DME model
Author: Pavel Cueto, based on the previous work of Torsten Dreyer
License: GPL
-->

<PropertyList>

    <path>KN62A.ac</path>

<params>
	<power-btn>instrumentation/dme[0]/power-btn</power-btn>
	<serviceable>instrumentation/dme[0]/serviceable</serviceable>
	<in-range>instrumentation/dme[0]/in-range</in-range>
	<right-display>instrumentation/dme[0]/min-kts-display</right-display>
	<left-display>instrumentation/dme[0]/miles-display</left-display>
	<left-display-dot>instrumentation/dme[0]/left-dot</left-display-dot>
	<!-- <dimming>instrumentation/dme[0]/dimming-norm</dimming> -->
	<min-kts>instrumentation/dme[0]/switch-min-kts</min-kts>
	<electrical>systems/electrical/outputs/dme</electrical>
</params>

<animation>
	<type>material</type>
	<object-name>Digit_01</object-name>
	<object-name>Digit_02</object-name>
	<object-name>Digit_03</object-name>
	<object-name>Digit_04</object-name>
	<object-name>Digit_05</object-name>
	<object-name>Digit_06</object-name>
	<object-name>Digit_07</object-name>
	<object-name>Digit_08</object-name>
	<object-name>Digit_P1</object-name>
	<object-name>Digit_P2</object-name>
	<object-name>Digit_NM</object-name>
	<object-name>Digit_RMT</object-name>
	<object-name>Digit_KT</object-name>
	<object-name>Digit_MHZ</object-name>
	<object-name>Digit_MIN</object-name>
	<emission>
		<red>0.7</red>
		<green>0.7</green>
		<blue>0.7</blue>
		<property alias="../../params/power-btn"/>
		<!-- <factor-prop>controls/lighting/panel-norm</factor-prop>
		<factor-prop>systems/electrical/outputs/instrument-lights</factor-prop> -->
	</emission>
</animation>

	<!-- POWER SWITCH -->
	
<animation>
    <type>translate</type>
    <object-name>Btn_Power</object-name>
    <property alias="../../params/power-btn"/>
    <factor>0.005</factor>
    <axis>
        <x>0</x>
        <y>1</y>
        <z>0</z>
    </axis>
    <center>
        <x-m> 0.000257</x-m>
        <y-m> 0.02592 </y-m>
        <z-m>-0.008278</z-m>
    </center>
</animation>

<animation>
	<type>pick</type>
	<object-name>Btn_Power</object-name>
	<visible>true</visible>
	<action>
		<button>0</button>
		<repeatable>false</repeatable>
		<binding>
			<command>property-toggle</command>
			<property alias="../../../../params/power-btn"/>
		</binding>
	</action>
</animation>

	<!-- MODE SWITCH -->
<!--
<animation>
	<type>pick</type>
	<object-name>Switch_01</object-name>
	<visible>true</visible>
	<action>
		<button>0</button>
		<repeatable>false</repeatable>
		<binding>
			<command>property-adjust</command>
			<property>instrumentation/dme/switch-position</property>
			<step>1</step>
			<min>1</min>
			<max>3</max>
			<wrap>0</wrap>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">1</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/source</property>
				<value>instrumentation/nav[0]/frequencies/selected-mhz</value>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">2</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/source</property>
				<value>instrumentation/dme/frequencies/selected-mhz</value>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">2</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/selected-mhz</property>
				<property>instrumentation/nav[0]/frequencies/selected-mhz</property>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">3</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/source</property>
				<value>instrumentation/nav[1]/frequencies/selected-mhz</value>
			</binding>
	</action>
	<action>
		<button>1</button>
		<repeatable>false</repeatable>
		<binding>
			<command>property-adjust</command>
			<property>instrumentation/dme/switch-position</property>
			<step>-1</step>
			<min>1</min>
			<max>3</max>
			<wrap>0</wrap>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">1</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/source</property>
				<value>instrumentation/nav[0]/frequencies/selected-mhz</value>
		</binding>
		<binding>
              <condition>
                  <equals>
                      <property>instrumentation/dme/switch-position</property>
                      <value type="int">2</value>
                  </equals>
              </condition>
              <command>property-assign</command>
              <property>instrumentation/dme/frequencies/source</property>
              <value>instrumentation/dme/frequencies/selected-mhz</value>
		</binding>
		<binding>
			<condition>
				<equals>
					<property>instrumentation/dme/switch-position</property>
					<value type="int">2</value>
				</equals>
			</condition>
			<command>property-assign</command>
				<property>instrumentation/dme/frequencies/selected-mhz</property>
				<property>instrumentation/nav[1]/frequencies/selected-mhz</property>
		</binding>
	</action>
</animation>
-->
	<!-- LCD DISPLAY -->

<animation>
	<type>select</type>
	<object-name>Digit_01</object-name>
	<object-name>Digit_02</object-name>
	<object-name>Digit_03</object-name>
	<object-name>Digit_04</object-name>
	<object-name>Digit_05</object-name>
	<object-name>Digit_06</object-name>
	<object-name>Digit_07</object-name>
	<object-name>Digit_08</object-name>
	<object-name>Digit_P1</object-name>
	<object-name>Digit_P2</object-name>
	<object-name>Digit_NM</object-name>
	<object-name>Digit_RMT</object-name>
	<object-name>Digit_KT</object-name>
	<object-name>Digit_MHZ</object-name>
	<object-name>Digit_MIN</object-name>
	<condition>
		<and>
			<property alias="../../../../params/serviceable"/>
			<property alias="../../../../params/power-btn"/>
			<property alias="../../../../params/electrical"/>
		</and>
	</condition>
</animation>
<!--
<animation>
	<type>material</type>
	<object-name>Digit_01</object-name>
	<object-name>Digit_02</object-name>
	<object-name>Digit_03</object-name>
	<object-name>Digit_04</object-name>
	<object-name>Digit_05</object-name>
	<object-name>Digit_06</object-name>
	<object-name>Digit_07</object-name>
	<object-name>Digit_08</object-name>
	<object-name>Digit_P1</object-name>
	<object-name>Digit_P2</object-name>
	<object-name>Digit_NM</object-name>
	<object-name>Digit_RMT</object-name>
	<object-name>Digit_KT</object-name>
	<object-name>Digit_MHZ</object-name>
	<object-name>Digit_MIN</object-name>
	<emission>
		<red>-1.0</red>
		<green>-1.0</green>
		<blue>-1.0</blue>
		<factor-prop alias="../../../params/dimming"/>
		<offset>1</offset>
	</emission>
</animation>
-->
	<!-- the mode switch do display min/kts

<animation>
	<type>select</type>
	<object-name>Digit_MIN</object-name>
	<condition>
		<not>
			<property alias="../../../../params/min-kts"/>
		</not>
	</condition>
</animation>

<animation>
	<type>select</type>
	<object-name>Digit_KT</object-name>
	<condition>
		<property alias="../../../params/min-kts"/>
	</condition>
</animation>
-->

<animation>
	<type>select</type>
	<object-name>Digit_MHZ</object-name>
	<object-name>Digit_RMT</object-name>
	<condition>
		<not>
			<property alias="../../../../params/min-kts"/>
		</not>
	</condition>
</animation>

 <!-- <animation>
	<type>translate</type>
	<object-name>Btn_Mode</object-name>
  <property alias="../../params/min-kts"/>
	<factor>-0.000000003</factor>
    <axis>
     <x1-m> 0.0      </x1-m>
     <y1-m> 0.022526 </y1-m>
     <z1-m> 0.0051675</z1-m>
     <x2-m> 0.0      </x2-m>
     <y2-m> 0.038181 </y2-m>
     <z2-m> 0.0051675</z2-m>
    </axis>
</animation> 

x	0.000257
y	0.030170
z	0.005167


<animation>
	<type>pick</type>
	<object-name>Btn_Mode</object-name>
	<visible>true</visible>
	<action>
		<button>0</button>
		<repeatable>false</repeatable>
		<binding>
			<command>property-toggle</command>
			<property alias="../../../../params/min-kts"/>
		</binding>
	</action>
</animation>
-->

<!-- DISTANCE DISPLAY 
	(Always, ON, shows nn.n when distance is less than 100NM and shows nnn when distance is greater than or equal to 100NM)
-->

<animation>
	<name>LeftDecimalDot</name>
	<type>select</type>
	<object-name>Digit_P1</object-name>
	<condition>
		<property alias="../../../params/left-display-dot"/>
	</condition>
</animation>

	<!-- blank leading zeros -->

<animation>
	<name>miles_100_blank</name>
	<type>select</type>
	<object-name>Digit_01</object-name>
	<condition>
		<greater-than-equals>
			<property alias="../../../../params/left-display"/>
			<value>100.0</value>
		</greater-than-equals>
	</condition>
</animation>

<animation>
	<name>miles_10_blank</name>
	<type>select</type>
	<object-name>Digit_02</object-name>
	<condition>
		<or>
			<greater-than-equals>
				<property alias="../../../../../params/left-display"/>
				<value>10.0</value>
			</greater-than-equals>
			<and>
				<property alias="../../../../../params/left-display-dot"/>
				<greater-than-equals>
					<property alias="../../../../../../params/left-display"/>
					<value>1.0</value>
				</greater-than-equals>
			</and>
		</or>
	</condition>
</animation>

<animation>
	<name>miles_1_blank</name>
	<type>select</type>
	<object-name>Digit_03</object-name>
	<condition>
		<greater-than-equals>
			<property alias="../../../../params/left-display"/>
			<value>1.0</value>
		</greater-than-equals>
	</condition>
</animation>

	<!-- NM DIGITS -->

<animation>
	<name>miles_100_lo</name>
	<type>textranslate</type>
	<object-name>Digit_01</object-name>
	<property alias="../../params/left-display"/>
	<step>100</step>
	<factor>0.001</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>miles_10_lo</name>
	<type>textranslate</type>
	<object-name>Digit_02</object-name>
	<property alias="../../params/left-display"/>
	<step>10</step>
	<factor>0.01</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>miles_1_lo</name>
	<type>textranslate</type>
	<object-name>Digit_03</object-name>
	<property alias="../../params/left-display"/>
	<step>1</step>
	<factor>0.1</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

	<!-- RIGHT DISPLAY -->

<animation>
	<name>kts_100</name>
	<type>textranslate</type>
	<object-name>Digit_04</object-name>
	<property>/instrumentation/dme[0]/indicated-ground-speed-kt</property>
	<step>100</step>
	<factor>0.001</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>kts_10</name>
	<type>textranslate</type>
	<object-name>Digit_05</object-name>
	<property>/instrumentation/dme[0]/indicated-ground-speed-kt</property>
	<step>10</step>
	<factor>0.01</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>kts_1</name>
	<type>textranslate</type>
	<object-name>Digit_06</object-name>
	<property>/instrumentation/dme[0]/indicated-ground-speed-kt</property>
	<step>1</step>
	<factor>0.1</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>min_10</name>
	<type>textranslate</type>
	<object-name>Digit_07</object-name>
	<property>/instrumentation/dme[0]/indicated-time-min</property>
	<step>10</step>
	<factor>0.01</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>min_1</name>
	<type>textranslate</type>
	<object-name>Digit_08</object-name>
	<property>/instrumentation/dme[0]/indicated-time-min</property>
	<step>1</step>
	<factor>0.1</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

	<!-- Right display, showing either kts or min, handled by dme.nas

<animation>
	<condition>
		<greater-than-equals>
			<property alias="../../../../params/right-display"/>
			<value>100</value>
		</greater-than-equals>
	</condition>
	<name>kts_100_select</name>
	<type>select</type>
	<object-name>Digit_04</object-name>
</animation>

<animation>
	<condition>
		<greater-than-equals>
			<property alias="../../../../params/right-display"/>
			<value>10</value>
		</greater-than-equals>
	</condition>
	<name>kts_10_select</name>
	<type>select</type>
	<object-name>Digit_05</object-name>
</animation>

<animation>
	<condition>
		<property alias="../../../params/in-range"/>
	</condition>
	<name>kts_1_select</name>
	<type>select</type>
	<object-name>Digit_06</object-name>
</animation>

<animation>
	<name>kts_100</name>
	<type>textranslate</type>
	<object-name>Digit_04</object-name>
	<property alias="../../params/right-display"/>
	<step>100</step>
	<factor>0.001</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>kts_10</name>
	<type>textranslate</type>
	<object-name>Digit_05</object-name>
	<property alias="../../params/right-display"/>
	<step>10</step>
	<factor>0.01</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>

<animation>
	<name>kts_1</name>
	<type>textranslate</type>
	<object-name>Digit_06</object-name>
	<property alias="../../params/right-display"/>
	<step>1</step>
	<factor>0.1</factor>
	<axis>
		<x>1</x>
		<y>0</y>
		<z>0</z>
	</axis>
</animation>
    -->

<!-- Label Text -->

<text>
	<name>LabelText</name>
	<type type="string">literal</type>
		<text type="string">DME</text>
	<draw-text type="bool">true</draw-text>
	<font>Helvetica.txf</font>
		<character-size type="double">0.012</character-size>
		<character-aspect-ratio type="double">1.0</character-aspect-ratio>
	<axis-alignment>yz-plane</axis-alignment>
	<max-height>0.2</max-height>
	<max-width>0.07</max-width>
	<font-resolution>
		<width type="int">32</width>
		<height type="int">32</height>
	</font-resolution>
	<alignment>center-center</alignment>
	<offsets>
		<x-m> 0.01</x-m>
		<y-m> 0.0 </y-m>
		<z-m> 0.0 </z-m>
	</offsets>
</text>

<animation>
	<type>material</type>
		<object-name>LabelText</object-name>
	<emission>
		<red>1.0</red>
		<green>0.8</green>
		<blue>0.0</blue>
	</emission>
</animation>

<animation>
	<type>select</type>
		<object-name>LabelText</object-name>
	<condition>
		<property>/sim/panel-hotspots</property>
	</condition>
</animation>

</PropertyList>